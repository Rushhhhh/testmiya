!function(i){function t(t,o){this.element=i(t),this.options=i.extend({},s,o),this.baseDom=i(this.options.baseDom),this.viewBlock=i("#viewpic_block").length?i("#viewpic_block"):i('<div id="viewpic_block" class="viewpic_block"><i class="viewpic_arrow"></i><div class="viewpic_con"></div></div>').appendTo(this.options.baseDom),this.basePos={left:this.baseDom.offset().left,top:this.baseDom.offset().top,height:this.baseDom.height()},this.init()}function o(i){var t=i.attr("src");return t.replace(new RegExp("_normal_","g"),"_topic_")}function e(){var i=this.element.offset().top+Math.round(this.options.picheight/3)-this.viewBlock.offset().top-20;this.viewBlock.find(".viewpic_arrow").css({top:i})}var n="viewPic",s={baseDom:"body",picwidth:77,picheight:77,callback:null};t.prototype={init:function(){var i=this;i.element.on("mouseover",function(){i.reposition(),i.loadBigPic(),i.viewBlock.show()}).on("mouseout",function(){i.viewBlock.hide()})},loadBigPic:function(){function t(i,t){var o=new Image;o.onload=function(){o.onload=null,t(o)},o.src=i}var n=this,s=o(n.element.find("img"));t(s,function(t){n.viewBlock.find(".viewpic_con").html(i(t)),setTimeout(function(){n.reposition(t.height),e.call(n)},0)})},reposition:function(t){var o=Math.round(t/9),e=this.element.offset().top-o,n=this.element.offset().left+this.options.picwidth;if(t){var s=i(window).scrollTop(),c=s+i(window).height();e<s?e=s+10:c<e+t-this.options.picheight&&(e=c-t/.9+12)}this.viewBlock.css({top:e,left:n+15})}},i.fn[n]=function(o){return this.each(function(){i.data(this,"plugin_"+n,new t(this,o))})}}(jQuery);