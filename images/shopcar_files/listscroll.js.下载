var ListScroll=function(t){this._init(t),this.box&&this.len&&this.width&&this._setHTML()};ListScroll.prototype={_init:function(t){this.options={box:null,len:0,width:0,duration:500,btnpre:null,btnnext:null,isLoop:!1,isInterval:!1,intervalTime:4e3},this.options=jQuery.extend(this.options,t||{}),this.box=this.options.box,this.len=this.options.len,this.width=this.options.width,this.boxWidth=this.len*this.width,this.duration=this.options.duration,this.btnpre=this.options.btnpre,this.btnnext=this.options.btnnext,this.isLoop=this.options.isLoop,this.isInterval=this.options.isInterval,this.intervalTime=this.options.intervalTime,this.left=0,this.maxLeft=0,this.lock=!1},_setHTML:function(){var t=this.box,i=this.len,e=this.width,s=t.children("li");if(s.length>i){if(this.isLoop){var n=s.detach().slice(s.length-i).clone(),o=s.slice(0,i).clone();this.maxLeft=(s.length+i)*e,this.preLeft=i*e,this.left=t.position().left-this.preLeft,t.append(s).prepend(n).append(o).css("left",this.left)}else this.maxLeft=(Math.ceil(s.length/i)-1)*i*e,t.css("left",this.left);this._bind()}else this.btnpre.hide(),this.btnnext.hide()},_toPre:function(){var t=this;this.isLoop?(this.lock=!0,this.left=this.left+this.boxWidth,this.left<-this.preLeft?this.box.animate({left:this.left},this.duration,"",function(){t.lock=!1}):this.box.animate({left:this.left},this.duration,"",function(){t.left=t.left-t.maxLeft+t.preLeft,t.box.css("left",t.left),t.lock=!1})):0!==this.left&&(this.lock=!0,this.left=this.left+this.boxWidth,this.box.animate({left:this.left},this.duration,"",function(){t.lock=!1}))},_toNext:function(){var t=this;this.isLoop?(this.lock=!0,this.left=this.left-this.boxWidth,this.left>-this.maxLeft+this.preLeft?this.box.animate({left:this.left},this.duration,"",function(){t.lock=!1}):this.box.animate({left:this.left},this.duration,"",function(){t.left=t.left+t.maxLeft-t.preLeft,t.box.css("left",t.left),t.lock=!1})):this.left!==-this.maxLeft&&(this.lock=!0,this.left=this.left-this.boxWidth,this.box.animate({left:this.left},this.duration,"",function(){t.lock=!1}))},_bind:function(){var t=this;this.btnpre.click(function(){return t.lock||t._toPre(),!1}),this.btnnext.click(function(){return t.lock||t._toNext(),!1}),this.isLoop&&this.isInterval&&(this.timer=setInterval(function(){t._toNext.call(t)},t.intervalTime),this.box.add(this.btnpre).add(this.btnnext).hover(function(){clearInterval(t.timer)},function(){t.timer=setInterval(function(){t._toNext.call(t)},t.intervalTime)}))}},$(function(){new ListScroll({box:$("#scrollul_1"),len:3,width:280,btnpre:$("#top_pre_1"),btnnext:$("#top_next_1")}),new ListScroll({box:$("#scrollul_2"),len:3,width:280,btnpre:$("#top_pre_2"),btnnext:$("#top_next_2"),isLoop:!0,isInterval:!0,intervalTime:2e3})});