Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var i=Array.prototype.slice.call(arguments,1),n=this,o=function(){},s=function(){return n.apply(this instanceof o?this:t||this,i.concat(Array.prototype.slice.call(arguments)))};return o.prototype=this.prototype,s.prototype=new o,s}),"b"!="ab".substr(-1)&&(String.prototype.substr=function(t){return function(i,n){return i<0&&(i=this.length+i),t.call(this,i,n)}}(String.prototype.substr)),function(){var t={date:"June 7, 2087 15:03:25",time:{now:!1,warm:!1,start:!1,end:!1,back:!1,backend:!1},title:["距预热开始","距活动开始","距活动结束","距返场开始","距返场结束","活动已结束"],refresh:1e3,offset:0,onEnd:function(){},render:function(t){var i="";this.interval&&(i='<span class="appw t0">'+t.days+'</span>天<span class="appw t1">'+this.leadingZeros(t.hours)+'</span>时<span class="appw t2">'+this.leadingZeros(t.min)+'</span>分<span class="appw t3">'+this.leadingZeros(t.sec)+'</span>秒<span class="appw t4">'+this.leadingZeros(t.millisec)+"</span>"),this.el.innerHTML=this.title+":"+i}},i=function(i,n){if(i){this.el=i,this.options={},this.interval=!1;var o={};this.mergeOptions=function(i){for(var n in t)if(t.hasOwnProperty(n)){if(this.options[n]="undefined"!=typeof i[n]?i[n]:t[n],"[object Object]"===Object.prototype.toString.call(t[n]))for(var o in t[n])t[n].hasOwnProperty(o)&&(this.options[n][o]="undefined"!=typeof i[n][o]?i[n][o]:t[n][o],"time"===n&&"object"!=typeof this.options[n][o]&&(this.options[n][o]=!!this.options[n][o]&&new Date(this.options[n][o])));"function"==typeof this.options[n]&&(this.options[n]=this.options[n].bind(this))}}.bind(this),this.mergeOptions(n),this.options.time.now&&(this.now=+new Date(this.options.time.now));var s=0,e=0,r=0;this.getDiffDate=function(){var t=+new Date,i=this.options.time.warm?this.options.time.warm.getTime():0,n=this.options.time.start?this.options.time.start.getTime():0,a=this.options.time.end?this.options.time.end.getTime():0;_back=this.options.time.back?this.options.time.back.getTime():0,_backend=this.options.time.backend?this.options.time.backend.getTime():0,s=e,e=Math.floor((a-t)/1e3),r=0!==s?s-e:1;var h;this.options.time.now&&(this.now+=this.options.refresh*r,t=this.now),t<n?i?t<i?(this.title=this.options.title[0],h=(i-t+this.options.offset)/1e3,o.onBeforeWarm||"function"!=typeof onBeforeWarm||(onBeforeWarm(),o.onBeforeWarm=1)):(this.title=this.options.title[1],h=(n-t+this.options.offset)/1e3,o.onWarm||"function"!=typeof onWarm||(onWarm(),o.onWarm=1)):(this.title=this.options.title[1],h=(n-t+this.options.offset)/1e3,o.onBeforeStart||"function"!=typeof onBeforeStart||(onBeforeStart(),o.onBeforeStart=1)):t>=n&&t<a?(this.title=this.options.title[2],h=(a-t+this.options.offset)/1e3,o.onStart||"function"!=typeof onStart||(onStart(),o.onStart=1)):_back&&_backend&&_back>=a?t<_back?(this.title=this.options.title[3],h=(_back-t+this.options.offset)/1e3,o.onBeforeBack||"function"!=typeof onBeforeBack||(onBeforeBack(),o.onBeforeBack=1)):t>=_back&&t<_backend?(this.title=this.options.title[4],h=(_backend-t+this.options.offset)/1e3,o.onBack||"function"!=typeof onBack||(onBack(),o.onBack=1)):(this.title=this.options.title[5],h=0,o.onEnd||"function"!=typeof onEnd||(onEnd(),o.onEnd=1)):(this.title=this.options.title[5],h=0,o.onEnd||"function"!=typeof onEnd||(onEnd(),o.onEnd=1));var p={years:0,days:0,hours:0,min:0,sec:0,millisec:0};return h<=0?(this.interval&&(this.stop(),this.options.onEnd()),p):(h>=31557600&&(p.years=Math.floor(h/31557600),h-=365.25*p.years*86400),h>=86400&&(p.days=Math.floor(h/86400),h-=86400*p.days),h>=3600&&(p.hours=Math.floor(h/3600),h-=3600*p.hours),h>=60&&(p.min=Math.floor(h/60),h-=60*p.min),p.sec=Math.round(h),p.millisec=h%1*1e3,p)}.bind(this),this.leadingZeros=function(t,i){return i=i||2,t=String(t),t.length>i?t:(Array(i+1).join("0")+t).substr(-i)},this.update=function(t){return"object"!=typeof t&&(t=new Date(t)),this.options.date=t,this.render(),this}.bind(this),this.stop=function(){return this.interval&&(clearInterval(this.interval),this.interval=!1),this}.bind(this),this.render=function(){return this.options.render(this.getDiffDate()),this}.bind(this),this.start=function(){if(!this.interval)return this.render(),this.options.refresh&&(this.interval=setInterval(this.render,this.options.refresh)),this}.bind(this),this.updateOffset=function(t){return this.options.offset=t,this}.bind(this),this.restart=function(t){return this.mergeOptions(t),this.interval=!1,this.start(),this}.bind(this),this.start()}};window.Countdown=i}();